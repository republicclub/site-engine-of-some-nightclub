<h1 mat-dialog-title>Покупка Билета</h1>
<div mat-dialog-content>
  <mat-horizontal-stepper [linear]="false" #stepper *ngIf="!orderComplete">
    <mat-step [stepControl]="orderFormGroup">
      <form [formGroup]="orderFormGroup">
        <ng-template matStepLabel>Выбор билетов</ng-template>
        Одиночные билеты на танцпол
        <span class="club-order-ticket-area">
          <div class="club-order-ticket-btn" title="Уменьшить кол-во билетов"
               (click)="decrementDanceFloor()">-</div>
          <div class="club-order-ticket-count">
            <input type="text" formControlName="danceFloor" [(ngModel)]="ticketOrder.danceFloor">
          </div>
          <div class="club-order-ticket-btn" title="Увеличить кол-во билетов"
               (click)="incrementDanceFloor()">+</div>
        </span>
        <br>
        Всего мест за столиком : {{ticketOrder.placeSeats}}
        <br>
        <div class="area-map">
          <div class="area-club-scene">RE:PUBLIC</div>
          <div class="area-down-bar"></div>
          <div class="area-console">
            <div class="area-table" *ngFor="let table of tablesConsoleLeft">
              <div *ngFor="let place of table.places">
                <div [ngClass]="getPlaceStateClass(place)" (click)="onPlaceClick(place)"></div>
              </div>
            </div>
            <div class="area-console-control"></div>
            <div class="area-table" *ngFor="let table of tablesConsoleRight">
              <div *ngFor="let place of table.places">
                <div [ngClass]="getPlaceStateClass(place)" (click)="onPlaceClick(place)"></div>
              </div>
            </div>
          </div>
          <div class="area-top-dance"></div>
          <div class="area-stairs">
            <div class="area-stairs-left">
              <div class="area-stairs-left-row-first area-table-line">
                <div class="area-table" *ngFor="let table of tablesBottomStairs">
                  <div *ngFor="let place of table.places">
                    <div [ngClass]="getPlaceStateClass(place)" (click)="onPlaceClick(place)"></div>
                  </div>
                </div>
              </div>
              <div class="area-stairs-left-row-second area-table-line">
                <div class="area-table" *ngFor="let table of tablesMiddleStairs">
                  <div *ngFor="let place of table.places">
                    <div [ngClass]="getPlaceStateClass(place)" (click)="onPlaceClick(place)"></div>
                  </div>
                </div>
              </div>
              <div class="area-stairs-left-row-third area-table-line">
                <div class="area-table" *ngFor="let table of tablesTopStairs">
                  <div *ngFor="let place of table.places">
                    <div [ngClass]="getPlaceStateClass(place)" (click)="onPlaceClick(place)"></div>
                  </div>
                </div>
              </div>
            </div>
            <div class="area-stairs-middle">
            </div>
            <div class="area-stairs-right">
              <div class="area-stairs-right-row-first area-table-line">
                <div class="area-left">
                  <div class="area-table" *ngFor="let table of tablesEleven">
                    <div class="area-table-line">
                      <div class="area-table-place area-table-place-busy table-left"></div>
                      <div class="area-table-place area-table-place-busy table-right"></div>
                    </div>
                    <div class="area-table-line">
                      <div class="area-table-place area-table-place-busy table-left"></div>
                      <div class="area-table-place area-table-place-busy table-right"></div>
                    </div>
                  </div>
                </div>
                <div class="area-top-bar">
                </div>
              </div>
              <div class="area-stairs-right-row-second area-table-line">
                <div class="area-left">
                  <div class="area-table" *ngFor="let table of tablesSeventeen">
                    <div *ngFor="let place of table.places">
                      <div [ngClass]="getPlaceStateClass(place)" (click)="onPlaceClick(place)"></div>
                    </div>
                  </div>
                </div>
                <div class="area-nothing-second"></div>
              </div>
              <div class="area-nothing-third area-table-line"></div>
            </div>
          </div>
        </div>
        <br>
        Cумма оплаты {{ticketOrder.totalMoney}}
        <br>
        На платежной странице будет указан номер заказа и сумма платежа. Для оплаты вам необходимо
        ввести свои карточные данные и подтвердить платеж, нажав кнопку «Оплатить». Если ваша карта поддерживает
        технологию
        3-D Secure, системой ваш будет предложено пройти стандартную одноминутную процедуру проверки владельца карты на
        странице вашего банка (банка, который выдал вашу карту).
        <br>Обращаем ваше внимание, что после проведения платежа на указанный вами электронный адрес
        придет подтверждение оплаты. Просим вас сохранять данные оплат.
        <br>Мы принимаем платежи по следующим банковским картам: Visa, Visa Electron, MasterCard, Maestro, Белкарт и
        картой Халва.
        <br>
        <br>Платежи по банковским картам осуществляются через систему электронных платежей <a href="https://bepaid.by/"
                                                                                              target="_blank"><b><u>bePaid</u></b></a>.
         Платежная страница системы bePaid отвечает всем требованиям безопасности передачи данных (PCI DSS Level 1). Все
        конфиденциальные данные хранятся в зашифрованном виде и максимально устойчивы к взлому.
        <br>
        Возврат денежных средств осуществляется на карту, с которой ранее была произведена оплата. Срок поступления
        денежных
        средств на карту от 3 до 30 дней с момента осуществления возврата Продавцом.
        <br>
        Возврат возможен, если до мероприятия не менее 5 рабочих дней. Для возврата перейдите в
        <a routerLink="/feedback" (click)="onNoClick()"><u>раздел обратной связи</u></a>
        и опишите проблему.
        <br>
        <div>
          <button mat-button matStepperNext color="primary">Далее</button>
        </div>
      </form>
    </mat-step>
    <mat-step [stepControl]="orderDetailsFormGroup">
      <ng-template matStepLabel>Общая информация о пользователе</ng-template>








      <div class="form-group">
        <label for="name">Имя</label>
        <input type="text" class="form-control"
               id="name"
               required
               [(ngModel)]="ticketOrder.name"
               name="name"
               #name="ngModel"
               placeholder="Имя?"
        >
      </div>

      <div class="form-group">
        <label for="name">Фамилия</label>
        <input type="text" class="form-control"
               id="surname"
               required
               [(ngModel)]="ticketOrder.surname"
               name="surname"
               #surname="ngModel"
               placeholder="Фамилия?"
        >
      </div>

      <div class="form-group">
        <label for="phone">Email aдрес</label><br>
        <input type="email" class="form-control" id="email" aria-describedby="emailHelp" [(ngModel)]="ticketOrder.email"
               required
               name="email"
               #email="ngModel"
               placeholder="Enter email">
        <small id="emailHelp" class="form-text text-muted">Мы никому не расскажем ваш емеил.</small>
      </div>


      <div class="form-group">
        <label for="phone">Номер мобильного телефона</label><br>
        <input type="tel" class="form-control" id="phone" aria-describedby="phoneHelp" [(ngModel)]="ticketOrder.phone"
               required
               name="phone"
               #phone="ngModel"
               placeholder="Enter phone">
        <small id="phoneHelp" class="form-text text-muted">Мы свяжемся с вами в ближайшее время, после оформления
          заказа.
        </small>
      </div>

      <div class="form-group">
        <label for="description">комментарий к заказу</label>
        <textarea type="text" class="form-control" id="description"

                  required
                  [(ngModel)]="ticketOrder.description"
                  name="description"
                  #description="ngModel"
                  placeholder="Введите ваши дополнительные пожелания, например время прибытия, если заказываете столик"> </textarea>
      </div>

      <div class="form-check">

        <input type="checkbox" class="form-check-input" id="rulesCheck"
               [(ngModel)]="ticketOrder.rulesCheck" name="rulesCheck"
               #rulesCheck="ngModel"
               required>
        <label class="form-check-label" for="rulesCheck">Я обязуюсь не нарушать: <a href="/rules" target="_blank"><u><b>правила клуба RE:PUBLIC</b></u></a></label>
      </div>

      <div class="form-check">

        <input type="checkbox" class="form-check-input" id="offerCheck"
               [(ngModel)]="ticketOrder.offerCheck" name="offerCheck"
               #offerCheck="ngModel"
               required>
        <label class="form-check-label" for="rulesCheck">Я принимаю: <a href="/public-offer" target="_blank"><u><b>Договор публичной оферты клуба RE:PUBLIC</b></u></a></label>
      </div>













      <!--<app-order-titcket-edit [order]="ticketOrder. ></app-order-titcket-edit>-->
      <div>
        <button mat-button matStepperPrevious color="accent" >Назад</button>
        <button mat-button matStepperNext color="primary">Далее</button>
      </div>
    </mat-step>
    <mat-step>
      <ng-template matStepLabel>Превью заказа</ng-template>
       Данные покупателя : <br>
      {{ticketOrder.name}}<br>
      {{ticketOrder.surname}}<br>
      {{ticketOrder.email}}<br>
      {{ticketOrder.phone}}<br>
      {{ticketOrder.description}}<br>
      Билетов на танцпол : {{ticketOrder.danceFloor}}<br>
      Всего мест за столиками : {{ticketOrder.placeSeats}}<br>
      Сумма к оплате : {{ticketOrder.totalMoney}}<br>
      <div>
        <button mat-button matStepperPrevious color="accent" >Назад</button>
        <button mat-raised-button color="primary"
                (click)="payTicketOrder()">Оплатить заказ онлайн {{ticketOrder.totalMoney}} BYN</button>
      </div>
    </mat-step>
  </mat-horizontal-stepper>
</div>
